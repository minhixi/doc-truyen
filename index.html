<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Nghe Truyá»‡n</title>
</head>
<body>
  <h2>Nghe truyá»‡n tá»« link</h2>
  <input id="storyLink" type="text" size="60" placeholder="DÃ¡n link chÆ°Æ¡ng truyá»‡n vÃ o Ä‘Ã¢y">
  <button onclick="loadStory()">ğŸ“– Táº£i ná»™i dung</button>
  <br><br>
  <textarea id="storyText" rows="15" cols="60"></textarea><br><br>
  <button onclick="speak()">â–¶ Äá»c</button>
  <button onclick="pause()">â¸ Táº¡m dá»«ng</button>
  <button onclick="resume()">â¯ Tiáº¿p tá»¥c</button>
  <button onclick="stop()">â¹ Dá»«ng</button>

  <script>
    async function loadStory(url) {
      const api = "https://truyen-reader.testnetboom07.workers.dev/?url=" + encodeURIComponent(url);
      alert(api);
      try {
        const res = await fetch(api);
        if (!res.ok) throw new Error("Server tráº£ lá»—i " + res.status);
        const data = await res.json();
        document.getElementById("output").innerText = data.text;
      } catch (e) {
        alert("KhÃ´ng táº£i Ä‘Æ°á»£c: " + e.message);
      }
    }

    let utterance;
    function speak() {
      const text = document.getElementById('storyText').value;
      utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'vi-VN'; // giá»ng tiáº¿ng Viá»‡t
      utterance.rate = 1;       // tá»‘c Ä‘á»™ Ä‘á»c
      speechSynthesis.speak(utterance);
    }
    function pause() { speechSynthesis.pause(); }
    function resume() { speechSynthesis.resume(); }
    function stop() { speechSynthesis.cancel(); }
  </script>
</body>
</html>
